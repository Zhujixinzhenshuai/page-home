
<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>风流の导航</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{--neon:#38bdf8;--accent:#7c3aed;}
  html,body{height:100%;margin:0;font-family:'Noto Sans SC', Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
  body{background:#071028;color:#e6eef6;transition:background .6s ease,color .4s ease;overflow:hidden;}
  body.light{background:#f6fbff;color:#04243b;}
  .site-title{font-size:28px;font-weight:900;text-align:center;margin:12px 0;position:relative;display:block;}
  .site-title .text{position:relative;z-index:1}
  .site-title .shine{position:absolute;left:-40%;top:0;width:80%;height:100%;background:linear-gradient(90deg, rgba(255,255,255,0), rgba(56,189,248,0.35), rgba(124,58,237,0.35), rgba(255,255,255,0));transform:skewX(-20deg);animation:shine 3.5s linear infinite;}
  @keyframes shine{0%{left:-80%}50%{left:120%}100%{left:120%}}
  .center-wrap{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:66vw;max-width:920px;min-width:320px;pointer-events:auto;}
  .panel{background:rgba(255,255,255,0.02);backdrop-filter:blur(10px);border-radius:14px;padding:12px;border:1px solid rgba(255,255,255,0.03);}
  body.light .panel{background:rgba(255,255,255,0.95);border:1px solid rgba(2,50,90,0.06);color:#04243b;}
  header{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;margin-bottom:8px;}
  .search{width:60%;min-width:260px;padding:10px 14px;border-radius:14px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit;text-align:center;}
  body.light .search{background:rgba(255,255,255,0.95);border:1px solid rgba(2,50,90,0.06);}
  .btn-row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:8px;}
  .filter-btn{padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);cursor:pointer;font-weight:700;}
  .filter-btn.active{box-shadow:0 8px 24px rgba(56,189,248,0.06);transform:translateY(-2px);}
  body.light .filter-btn{background:rgba(255,255,255,0.9);border:1px solid rgba(2,50,90,0.06);}
  .groups{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:10px;margin-top:12px;align-items:start;}
  .group{padding:4px;}
  .group-title{font-size:12px;font-weight:800;margin-bottom:6px;color:var(--neon);text-align:left;padding-left:6px;}
  body.light .group-title{color:#0b6b9a;}
  .card{display:flex;flex-direction:column;align-items:center;gap:6px;padding:8px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);cursor:pointer;transition:transform .12s ease,box-shadow .12s ease,background .12s ease;backdrop-filter:blur(10px);}
  body.light .card{background:rgba(255,255,255,0.9);border:1px solid rgba(2,50,90,0.06);}
  .card.small{width:110px;height:96px;font-size:12px;}
  .card:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(2,6,23,0.6);filter:brightness(1.04);}
  .favicon{width:40px;height:40px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.06));}
  .tag{font-size:12px;color:rgba(230,238,246,0.95);text-align:center;line-height:1.1;}
  .tag small{display:block;font-size:10px;opacity:0.7;}
  .tele{position:fixed;right:18px;bottom:18px;background:linear-gradient(180deg,#1da1f2,#0a7bdc);padding:10px;border-radius:50%;width:56px;height:56px;display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 8px 30px rgba(13,110,253,0.12);cursor:pointer;}
  footer.global-footer{position:fixed;left:0;right:0;bottom:6px;text-align:center;font-size:13px;color:rgba(230,238,246,0.6);}
  body.light footer.global-footer{color:#5b6b7a;}
  canvas#bgCanvas{position:fixed;left:0;top:0;pointer-events:none;z-index:1;}
  canvas#cursorCanvas{position:fixed;left:0;top:0;pointer-events:none;z-index:1500;}
  @media(max-width:640px){ .search{width:84%} .center-wrap{width:92vw} .groups{grid-template-columns:repeat(2,1fr)} }
</style>
</head>
<body class="dark">
<canvas id="bgCanvas"></canvas>
<canvas id="cursorCanvas"></canvas>

<div style="position:fixed;left:50%;transform:translateX(-50%);top:14px;z-index:1200;width:100%;max-width:920px;padding:6px;text-align:center;">
  <div class="site-title" aria-hidden="true">
    <span class="text">风流の导航</span>
    <span class="shine" aria-hidden="true"></span>
  </div>
</div>

<div class="center-wrap" style="z-index:1200;">
  <div class="panel">
    <header>
      <input id="search" class="search" placeholder="搜索 / Search" />
      <div class="btn-row" id="btnRow" role="tablist" aria-label="分类切换"></div>
    </header>

    <main>
      <div id="groups" class="groups" role="region" aria-live="polite"></div>
    </main>
  </div>
</div>

<div class="tele" id="teleBtn" title="联系 Telegram">@</div>
<footer class="global-footer">© 2025 风流の导航 | Powered by Cloudflare Pages</footer>

<script>
const DATA_URL = 'links.json';
const BUTTONS = ['Home','邮箱 / Email','开发者工具 / Dev Tools','AI 平台 / AI Platforms','搜索与导航 / Search & Explore','学习资源 / Learning','我的站点 / My Sites'];
const i18n = { zh:{search:'搜索：网站名 / 描述 / 标签'}, en:{search:'Search: site / description / tag'} };
let lang = localStorage.getItem('lang')||'zh';
const groupsEl=document.getElementById('groups'), searchEl=document.getElementById('search'), btnRow=document.getElementById('btnRow'), teleBtn=document.getElementById('teleBtn');
let allLinks=[];

function buildButtons(){ btnRow.innerHTML=''; BUTTONS.forEach(name=>{ const b=document.createElement('button'); b.className='filter-btn'; b.textContent = name==='Home'?'Home':name; b.dataset.group=name; b.addEventListener('click', ()=>{ document.querySelectorAll('.filter-btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); showGroup(name); }); btnRow.appendChild(b); }); const first=btnRow.querySelector('button'); if(first) first.classList.add('active'); }

async function loadLinks(){ try{ const r=await fetch(DATA_URL,{cache:'no-store'}); if(!r.ok) throw new Error('no file'); const data=await r.json(); allLinks=data.links||[];}catch(e){console.warn('load links failed',e); allLinks=[];} }

function showGroup(groupName){ const items= allLinks.filter(l=> (groupName==='Home') ? (['Cloudflare','GitHub','Gmail','YouTube'].some(k=> l.title.includes(k))) : (l.group===groupName)); groupsEl.innerHTML=''; if(groupName==='Home'){ const core=['Cloudflare','GitHub','Gmail','YouTube']; core.forEach(key=>{ const it=allLinks.find(x=>x.title.includes(key)); if(it) groupsEl.appendChild(createCard(it)); }); groupsEl.appendChild(createAddCard()); return; } if(items.length===0){ const el=document.createElement('div'); el.textContent='暂无内容'; el.style.padding='12px'; groupsEl.appendChild(el); return; } items.forEach(it=> groupsEl.appendChild(createCard(it))); }

function createCard(item){ const a=document.createElement('a'); a.className='card small'; a.href=item.url; a.target='_blank'; a.rel='noopener noreferrer'; a.addEventListener('click', ()=> playClick()); const img=document.createElement('img'); img.className='favicon'; img.style.width='40px'; img.style.height='40px'; img.src = item.icon && item.icon.length>0 ? item.icon : ('https://www.google.com/s2/favicons?sz=64&domain=' + (new URL(item.url).hostname)); const name=document.createElement('div'); name.className='tag'; name.textContent=item.title; const desc=document.createElement('small'); desc.textContent=item.description||''; name.appendChild(desc); a.appendChild(img); a.appendChild(name); return a; }
function createAddCard(){ const a=document.createElement('div'); a.className='card small'; a.style.display='flex'; a.style.alignItems='center'; a.style.justifyContent='center'; a.style.fontWeight='700'; a.textContent='+ 添加位置'; a.addEventListener('click', ()=>{ alert('请在 links.json 中添加新链接，或在 GitHub 仓库中编辑。'); }); return a; }

searchEl.addEventListener('input', ()=>{ const q=searchEl.value.trim().toLowerCase(); const active=document.querySelector('.filter-btn.active'); const group=active?active.dataset.group:'Home'; if(!q){ showGroup(group); return; } const filtered=allLinks.filter(l=> (l.title + l.description + l.group).toLowerCase().includes(q)); groupsEl.innerHTML=''; filtered.forEach(it=> groupsEl.appendChild(createCard(it)); }); teleBtn.addEventListener('click', ()=>{ const ok=confirm('将跳转到 Telegram 添加联系人 @mrfengliu，是否继续？'); if(ok) window.open('https://t.me/mrfengliu','_blank'); });

let audioCtx, masterGain, bgGain, audioOn=true, clickGain, bgNodes;
function initAudio(){ try{ audioCtx=new (window.AudioContext||window.webkitAudioContext)(); masterGain=audioCtx.createGain(); masterGain.gain.value=0.9; masterGain.connect(audioCtx.destination); bgGain=audioCtx.createGain(); bgGain.gain.value=0.12; bgGain.connect(masterGain); const freqs=[220,277,330]; const padGain=audioCtx.createGain(); padGain.gain.value=0.0; var oscs=[]; freqs.forEach(f=>{ const o=audioCtx.createOscillator(); o.type='sine'; o.frequency.value=f; o.start(); o.connect(padGain); oscs.push(o); }); const lp=audioCtx.createBiquadFilter(); lp.type='lowpass'; lp.frequency.value=800; padGain.connect(lp); lp.connect(bgGain); const lfo=audioCtx.createOscillator(); lfo.frequency.value=0.05; const lfoGain=audioCtx.createGain(); lfoGain.gain.value=0.06; lfo.connect(lfoGain); lfoGain.connect(padGain.gain); lfo.start(); bgNodes={oscs,padGain,lp,lfo,lfoGain}; clickGain=audioCtx.createGain(); clickGain.gain.value=0.9; clickGain.connect(masterGain);}catch(e){console.warn('Audio init failed',e);} }
function startBg(){ if(!audioCtx) initAudio(); try{ audioCtx.resume(); bgGain.gain.setTargetAtTime(0.12, audioCtx.currentTime, 0.05); }catch(e){console.warn('resume failed',e);} }
function playClick(){ if(!audioCtx) initAudio(); const now=audioCtx.currentTime; const o=audioCtx.createOscillator(); o.type='square'; o.frequency.setValueAtTime(880, now); const g=audioCtx.createGain(); g.gain.setValueAtTime(0.0001, now); o.connect(g); g.connect(clickGain); g.gain.exponentialRampToValueAtTime(0.6, now + 0.008); g.gain.exponentialRampToValueAtTime(0.0001, now + 0.18); o.start(now); o.stop(now + 0.2); }

const cursorCanvas=document.getElementById('cursorCanvas'); const cursorCtx=cursorCanvas.getContext('2d'); let cursorParticles=[]; function resizeCursor(){ cursorCanvas.width=innerWidth; cursorCanvas.height=innerHeight; } window.addEventListener('resize', resizeCursor); resizeCursor(); window.addEventListener('mousemove',(e)=>{ cursorParticles.push({x:e.clientX,y:e.clientY,life:30,r:Math.random()*2+1,vx:(Math.random()-0.5)*0.4,vy:-0.2}); }); function drawCursor(){ cursorCtx.clearRect(0,0,cursorCanvas.width,cursorCanvas.height); for(let i=cursorParticles.length-1;i>=0;i--){ const p=cursorParticles[i]; p.x+=p.vx; p.y+=p.vy; p.life--; cursorCtx.beginPath(); cursorCtx.fillStyle='rgba(56,189,248,'+(p.life/30*0.9)+')'; cursorCtx.arc(p.x,p.y,p.r,0,Math.PI*2); cursorCtx.fill(); if(p.life<=0) cursorParticles.splice(i,1); } requestAnimationFrame(drawCursor);} drawCursor();

const bgCanvas=document.getElementById('bgCanvas'); const bgCtx=bgCanvas.getContext('2d'); let W=innerWidth,H=innerHeight; function resizeBg(){ W=bgCanvas.width=innerWidth; H=bgCanvas.height=innerHeight; } window.addEventListener('resize', resizeBg); resizeBg(); let stars=[],meteors=[],petals=[]; function initStars(){ stars=[]; for(let i=0;i<200;i++) stars.push({x:Math.random()*W,y:Math.random()*H,r:Math.random()*1.4+0.3,alpha:Math.random()*0.9+0.1,tw:Math.random()*2000}); } function initPetals(){ petals=[]; for(let i=0;i<80;i++) petals.push({ x: W - Math.random()*200, y: Math.random()*H, vx: -0.2 - Math.random()*0.8, vy: 0.2 + Math.random()*0.6, rot: Math.random()*Math.PI*2, rotv: (Math.random()-0.5)*0.02, s: 8 + Math.random()*10, alpha: 0.8 + Math.random()*0.2 }); } initStars(); initPetals(); let lastMeteor=0; function drawBg(){ bgCtx.clearRect(0,0,W,H); if(theme==='dark'){ const g=bgCtx.createLinearGradient(0,0,0,H); g.addColorStop(0,'#03050a'); g.addColorStop(1,'#071028'); bgCtx.fillStyle=g; bgCtx.fillRect(0,0,W,H); for(let s of stars){ const flick=0.6+0.4*Math.sin(Date.now()/1000 + s.tw); bgCtx.beginPath(); bgCtx.fillStyle='rgba(255,255,255,'+(s.alpha * flick)+')'; bgCtx.arc(s.x,s.y,s.r,0,Math.PI*2); bgCtx.fill(); } if(Date.now()-lastMeteor > 2000 + Math.random()*4000){ meteors.push({x: Math.random()*W*0.8, y: Math.random()*H*0.6, vx: 6+Math.random()*8, vy: 2+Math.random()*3, life: 80}); lastMeteor = Date.now(); } for(let i=meteors.length-1;i>=0;i--){ const m=meteors[i]; bgCtx.beginPath(); bgCtx.moveTo(m.x,m.y); bgCtx.lineTo(m.x - m.vx*6, m.y - m.vy*6); const grad = bgCtx.createLinearGradient(m.x,m.y, m.x - m.vx*6, m.y - m.vy*6); grad.addColorStop(0,'rgba(255,255,255,0.95)'); grad.addColorStop(1,'rgba(56,189,248,0.0)'); bgCtx.strokeStyle=grad; bgCtx.lineWidth=2.5; bgCtx.stroke(); bgCtx.beginPath(); bgCtx.fillStyle='rgba(255,255,255,0.9)'; bgCtx.arc(m.x,m.y,2.8,0,Math.PI*2); bgCtx.fill(); m.x+=m.vx; m.y+=m.vy; m.life--; if(m.life<=0) meteors.splice(i,1); } } else { const g=bgCtx.createLinearGradient(0,0,0,H); g.addColorStop(0,'#fbfbff'); g.addColorStop(1,'#f0f7ff'); bgCtx.fillStyle=g; bgCtx.fillRect(0,0,W,H); bgCtx.fillStyle='rgba(230,240,255,0.9)'; bgCtx.beginPath(); bgCtx.moveTo(W, H*0.15); bgCtx.quadraticCurveTo(W*0.55, H*0.25, W*0.7, H*0.9); bgCtx.lineTo(W, H); bgCtx.fill(); for(let i=petals.length-1;i>=0;i--){ const p=petals[i]; bgCtx.save(); bgCtx.translate(p.x,p.y); bgCtx.rotate(p.rot); bgCtx.fillStyle='rgba(245,200,230,'+p.alpha+')'; bgCtx.beginPath(); bgCtx.ellipse(0,0,p.s, p.s*0.6, 0, 0, Math.PI*2); bgCtx.fill(); bgCtx.restore(); p.x+=p.vx; p.y+=p.vy; p.rot+=p.rotv; if(p.y>H+20||p.x<-40){ p.x=W - Math.random()*40; p.y=-10 - Math.random()*20; } } } requestAnimationFrame(drawBg); } drawBg();

(async function init(){ buildButtons(); await loadLinks(); document.querySelectorAll('.filter-btn')[0].classList.add('active'); showGroup('Home'); searchEl.placeholder = i18n[lang].search; if(localStorage.getItem('theme')) theme = localStorage.getItem('theme'); if(theme==='light') document.body.classList.add('light'); try{ initAudio(); startBg(); }catch(e){console.warn(e);} })();

document.querySelector('.site-title').addEventListener('dblclick', ()=>{ theme = (theme==='dark')?'light':'dark'; localStorage.setItem('theme', theme); if(theme==='light') document.body.classList.add('light'); else document.body.classList.remove('light'); });

